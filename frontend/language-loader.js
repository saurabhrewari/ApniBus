// The dictionaries are now defined directly in this file
const resources = {
    en: {
        translation: {
            "welcome": "Welcome",
            "login": "Login",
            "signup": "Sign Up",
            "please_signin": "Please Sign in to Continue",
            "username": "Username",
            "password": "Password",
            "remember_me": "Remember me",
            "no_account": "Don't have an account?",
            "find_bus": "Find Bus",
            "track_bus": "Track Bus",
            "categories": "Categories",
            "show_all": "Show All",
            "home": "Home",
            "booking": "Booking",
            "profile": "Profile",
            "choose_your_role": "Choose Your Role",
            "passenger": "Passenger",
            "driver": "Driver",
            "are_you": "Are you",
            "please_select_one": "Please select any one to continue",
            "next_button": "Next",
            "dashboard": "Dashboard",
            "route_setup": "Route Setup",
            "live_status": "Live Status",
            "route_setup": "Route Setup",
            "bus_number": "Bus Number",
            "enter_bus_number": "Enter Bus Number",
            "bus_route": "Bus Route",
            "enter_bus_route": "Enter Bus Route",
            "location": "Location",
            "enable": "Enable",
            "disable": "Disable",
            "start_journey": "Start Journey",
            "live_status": "Live Status",
            "end_journey": "End Journey",
            "seats": "Seats",
            "no_seat": "No Seat",
            "tagline": "Search Buses Between Stations",
            "swap_locations": "Swap Locations",
            "from_stand": "From Stand",
            "to_stand": "To Stand"
        }
    },
    hi: {
        translation: {
            "welcome": "आपका स्वागत है",
            "login": "लॉग इन करें",
            "signup": "साइन अप करें",
            "please_signin": "जारी रखने के लिए कृपया साइन इन करें",
            "username": "उपयोगकर्ता नाम",
            "password": "पासवर्ड",
            "remember_me": "मुझे याद रखें",
            "no_account": "खाता नहीं है?",
            "find_bus": "बस खोजें",
            "track_bus": "बस ट्रैक करें",
            "categories": "श्रेणियाँ",
            "show_all": "सब दिखाओ",
            "home": "होम",
            "booking": "बुकिंग",
            "profile": "प्रोफ़ाइल",
            "choose_your_role": "अपनी भूमिका चुनें",
            "passenger": "यात्री",
            "driver": "चालक",
            "are_you": "आप हैं",
            "please_select_one": "जारी रखने के लिए कृपया एक चुनें",
            "next_button": "अगला",
            "dashboard": "डैशबोर्ड",
            "route_setup": "रूट सेटअप",
            "live_status": "लाइव स्टेटस",
            "route_setup": "रूट सेटअप",
            "bus_number": "बस नंबर",
            "enter_bus_number": "बस नंबर दर्ज करें",
            "bus_route": "बस रूट",
            "enter_bus_route": "बस रूट दर्ज करें",
            "location": "स्थान",
            "enable": "सक्षम करें",
            "disable": "अक्षम करें",
            "start_journey": "यात्रा शुरू करें",
            "live_status": "लाइव स्टेटस",
            "end_journey": "यात्रा समाप्त करें",
            "seats": "सीटें",
            "no_seat": "कोई सीट नहीं",
            "tagline": "स्टेशनों के बीच बसें खोजें",
            "swap_locations": "स्थानों की अदला-बदली करें",
            "from_stand": "से स्टैंड",   // <-- MISSING KEY ADDED
            "to_stand": "तक स्टैंड"
        }
    },
    pa: {
        translation: {
            "welcome": "ਜੀ ਆਇਆਂ ਨੂੰ",
            "login": "ਲਾਗਿਨ ਕਰੋ",
            "signup": "ਸਾਈਨ ਅੱਪ ਕਰੋ",
            "please_signin": "ਜਾਰੀ ਰੱਖਣ ਲਈ ਕਿਰਪਾ ਕਰਕੇ ਸਾਈਨ ਇਨ ਕਰੋ",
            "username": "ਯੂਜ਼ਰਨੇਮ",
            "password": "ਪਾਸਵਰਡ",
            "remember_me": "ਮੈਨੂੰ ਯਾਦ ਰੱਖੋ",
            "no_account": "ਖਾਤਾ ਨਹੀਂ ਹੈ?",
            "find_bus": "ਬੱਸ ਲੱਭੋ",
            "track_bus": "ਬੱਸ ਟ੍ਰੈਕ ਕਰੋ",
            "categories": "ਸ਼੍ਰੇਣੀਆਂ",
            "show_all": "ਸਾਰੇ ਦਿਖਾਓ",
            "home": "ਮੁੱਖ ਪੰਨਾ",
            "booking": "ਬੁਕਿੰਗ",
            "profile": "ਪ੍ਰੋਫ਼ਾਈਲ",
            "choose_your_role": "ਆਪਣੀ ਭੂ primaireИКਾ ਚੁਣੋ",
            "passenger": "ਯਾਤਰੀ",
            "driver": "ਡਰਾਈਵਰ",
            "are_you": "ਕੀ ਤੁਸੀਂ ਹੋ",
            "please_select_one": "ਜਾਰੀ ਰੱਖਣ ਲਈ ਕਿਰਪਾ ਕਰਕੇ ਕੋਈ ਇੱਕ ਚੁਣੋ",
            "next_button": "ਅਗਲਾ",
            "dashboard": "ਡੈਸ਼ਬੋਰਡ",
            "route_setup": "ਰੂਟ ਸੈੱਟਅੱਪ",
            "live_status": "ਲਾਈਵ ਸਥਿਤੀ",
            "route_setup": "ਰੂਟ ਸੈੱਟਅੱਪ",
            "bus_number": "ਬੱਸ ਨੰਬਰ",
            "enter_bus_number": "ਬੱਸ ਨੰਬਰ ਦਰਜ ਕਰੋ",
            "bus_route": "ਬੱਸ ਰੂਟ",
            "enter_bus_route": "ਬੱਸ ਰੂਟ ਦਰਜ ਕਰੋ",
            "location": "ਸਥਾਨ",
            "enable": "ਯੋਗ ਕਰੋ",
            "disable": "ਅਯੋਗ ਕਰੋ",
            "start_journey": "ਯਾਤਰਾ ਸ਼ੁਰੂ ਕਰੋ",
            "live_status": "ਲਾਈਵ ਸਥਿਤੀ",
            "end_journey": "ਯਾਤਰਾ ਸਮਾਪਤ ਕਰੋ",
            "seats": "ਸੀਟਾਂ",
            "no_seat": "ਕੋਈ ਸੀਟ ਨਹੀਂ",
            "tagline": "ਸਟੇਸ਼ਨਾਂ ਵਿਚਕਾਰ ਬੱਸਾਂ ਦੀ ਖੋਜ ਕਰੋ",
            "swap_locations": "ਸਥਾਨਾਂ ਦੀ अदला-बदली ਕਰੋ",
            "from_stand": "ਤੋਂ ਸਟੈਂਡ",  // <-- MISSING KEY ADDED
            "to_stand": "ਤੱਕ ਸਟੈਂਡ"
        }
    }
};

function initializeLocalization() {
    const selectedLang = localStorage.getItem('selectedLanguage') || 'en';

    i18next.init({
        lng: selectedLang,
        fallbackLng: 'en',
        resources: resources // We provide the resources directly here
    }, function(err, t) {
        if (err) return console.error('Error initializing i18next:', err);
        updateContent();
    });
}

function updateContent() {
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (el.tagName === 'INPUT' && el.placeholder) {
            el.placeholder = i18next.t(key);
        } else {
            el.textContent = i18next.t(key);
        }
    });
}

initializeLocalization();